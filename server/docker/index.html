<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《docker》笔记 | yong-forever&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/yong-forever-blog/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/yong-forever-blog/assets/css/0.styles.33de1b1c.css" as="style"><link rel="preload" href="/yong-forever-blog/assets/js/app.61540ce8.js" as="script"><link rel="preload" href="/yong-forever-blog/assets/js/2.e7cba03d.js" as="script"><link rel="preload" href="/yong-forever-blog/assets/js/3.be5a514c.js" as="script"><link rel="preload" href="/yong-forever-blog/assets/js/35.6c7f488c.js" as="script"><link rel="prefetch" href="/yong-forever-blog/assets/js/10.1b3f0f0e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/100.b79cf637.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/101.b39f267a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/102.6f3e1545.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/103.6019464f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/104.b6e94524.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/105.15d73ac1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/106.d4703deb.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/107.cf6d6727.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/108.d457175c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/109.f79fc245.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/11.b2681599.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/110.bc495869.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/111.e0154aa0.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/112.36a203d5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/113.5f16e2fa.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/114.5f0911bd.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/115.1c8a7df2.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/116.f940b16e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/117.8815292b.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/118.c0aca63f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/119.dc00a694.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/12.5a54551f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/120.ce5b9fa2.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/121.37e9bf9f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/122.ca0dbdeb.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/123.ab615e6c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/124.dd68e5c2.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/125.31a8b242.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/126.6e6f6bf6.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/127.4206a9fe.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/128.e197d232.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/129.4fcfc708.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/13.a1964649.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/130.1621e03d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/131.c75e57d9.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/132.4cf6ca00.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/133.8aa8922d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/134.23fd63a4.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/135.fa929d53.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/136.c3dbcfc0.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/137.7381e405.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/138.680b5e55.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/139.0d339a30.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/14.67cdaae4.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/140.d1990d07.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/141.a85eb3e7.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/142.6669aea5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/143.9406be88.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/144.cd1c833c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/145.e4908329.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/146.af9cd351.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/147.7cbd9705.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/148.2f8359ab.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/149.39c964b9.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/15.e28ff222.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/150.2edc5fe0.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/151.505ebc9f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/152.66029736.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/153.77b96b14.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/154.49d58388.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/155.dd3795e7.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/156.a045abae.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/157.e4b6f759.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/158.46af0f81.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/159.8665f021.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/16.828a21e4.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/160.63aa9240.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/161.0cbb13bd.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/162.c2da629e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/163.17037959.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/164.84d401a3.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/165.1d3b5e77.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/166.a5da2543.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/167.bd318b44.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/168.8747c65a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/169.c5799fc4.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/17.6f7ac0e4.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/170.3a4cb9f7.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/171.08ca67c0.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/172.4d9efba6.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/173.312ef937.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/174.a035690a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/175.8aa33f37.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/176.e200db06.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/177.637ed132.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/178.88194a7e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/179.44a8b73c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/18.b3168bb4.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/180.fccf148e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/181.4a4a5a6c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/182.a8b6cfbb.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/183.a9d32ac3.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/184.540c264c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/185.a5afec75.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/186.62333d59.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/187.e0a69f60.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/188.82703f70.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/189.d537cbe0.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/19.cd14c28c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/190.6cc54e4f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/191.daddfa5c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/192.9e30aa68.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/193.6cb9bc42.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/194.7810c6c2.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/195.e59dc288.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/196.fa8d38e5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/197.5b359936.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/198.513074e8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/199.5dff0fa8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/20.dced456a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/200.0dc6b27e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/201.d739af71.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/202.d4c4d1d1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/203.7632f828.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/204.59426f06.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/205.2c7b8b1d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/206.fd91b74f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/207.ea9c2876.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/208.3ba49cc5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/209.4c9e1548.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/21.a63af816.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/210.3d91b7f1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/211.d1658ea8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/212.21a5f6c9.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/213.198ba17c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/214.cc971a61.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/215.2551bbaa.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/216.15293d3d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/217.fb384925.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/218.dd881677.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/219.64ff2e6f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/22.bc7f8215.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/220.52503d55.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/221.a57103a5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/222.3d646d24.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/223.80c881b8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/224.37f24793.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/225.beeda46b.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/226.6571413d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/227.e6bce7c8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/228.02b119df.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/229.064bce27.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/23.5b8bb994.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/230.49188d34.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/231.f6fcf5ea.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/232.ee08ecc8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/233.fec10017.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/234.d59d9c7f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/235.a9fc3363.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/236.f5cb46e7.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/237.0bb02b7d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/238.a1078b85.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/239.5592d144.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/24.b45707a5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/240.4ff1d7e4.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/241.50f3463d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/242.b39e58ba.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/243.f2ec6d2d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/244.22fe7586.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/245.872e98b6.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/246.17c651ae.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/247.b8c4330f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/248.4f84d2c6.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/249.fe390318.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/25.5532a89a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/250.751ac8f7.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/251.818a742c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/252.e3fe1cd7.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/253.d00d13bc.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/26.dcb6a594.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/27.cd1fadca.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/28.8d75bd01.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/29.a93fab7e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/30.bdc09a5f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/31.3ab9e6b8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/32.fd7e7bdf.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/33.e2ec2722.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/34.9eaf806f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/36.b2048811.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/37.5b1950af.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/38.f76a2c0a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/39.35e99502.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/4.7f68c7bc.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/40.069b8344.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/41.8e23678d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/42.9249fba3.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/43.2f3a6204.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/44.85071374.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/45.950c1821.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/46.829fad5d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/47.77809037.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/48.c9133684.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/49.56da1a38.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/5.dced6ce5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/50.a166e7bf.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/51.f174feb0.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/52.798ec56d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/53.723a0225.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/54.58255563.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/55.40c3bb39.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/56.969dd19d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/57.25213bb1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/58.f2b47607.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/59.3e38129e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/6.232f8fcd.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/60.95d3735c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/61.7eaccbe1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/62.ce1257e9.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/63.7276ebb1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/64.91d550d5.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/65.44b10f7b.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/66.14afcb8d.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/67.9f1ac73e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/68.3c421cdc.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/69.ede88e61.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/7.a69db60e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/70.25aea6c8.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/71.d32a7e9c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/72.dc33542c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/73.c6ab9d11.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/74.a054e9d1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/75.47c602bc.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/76.b1b12a6c.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/77.36e405c3.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/78.b2d8fa01.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/79.82a0042b.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/8.0afa700f.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/80.404f17d6.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/81.d6c7ee75.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/82.2d70cd0e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/83.4ae92aef.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/84.ca962558.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/85.37178f11.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/86.e0d6294e.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/87.6d2105a1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/88.7042a96a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/89.e3dd2c65.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/9.97d3521a.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/90.bc2a3190.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/91.baa2f2f6.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/92.82fe3ae1.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/93.47cfcf24.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/94.f305e568.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/95.13164362.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/96.0df202be.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/97.fe9d44de.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/98.4598be77.js"><link rel="prefetch" href="/yong-forever-blog/assets/js/99.effd5575.js">
    <link rel="stylesheet" href="/yong-forever-blog/assets/css/0.styles.33de1b1c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yong-forever-blog/" class="home-link router-link-active"><img src="http://q.qlogo.cn/headimg_dl?dst_uin=1258225956&amp;spec=640&amp;img_type=jpg" alt="yong-forever's blog" class="logo"> <span class="site-name can-hide">yong-forever's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/yong-forever-blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/yong-forever-blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/yong-forever-blog/server/" class="link-title router-link-active">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/server/test/" class="nav-link">TEST</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/server/docker/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《docker》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/javaweb/" class="nav-link">《JavaWeb》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/juc/" class="nav-link">《JUC》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/jvm/" class="nav-link">《JVM》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/mybatis/" class="nav-link">《Mybatis》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/mysql/" class="nav-link">《Mysql》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/redis/" class="nav-link">《Redis》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/springcloud/" class="nav-link">《SpringCloud》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/design/" class="nav-link">《设计模式》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/yong-forever-blog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/yong-forever-blog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/yong-forever-blog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/yong-forever-blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/yong-forever-blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/yong-forever-blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/yong-forever/yong-forever-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="http://q.qlogo.cn/headimg_dl?dst_uin=1258225956&amp;spec=640&amp;img_type=jpg"> <div class="blogger-info"><h3>Yiyong Zhan</h3> <span>如何对世界抱有持续的爱</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/yong-forever-blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/yong-forever-blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/yong-forever-blog/server/" class="link-title router-link-active">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/server/test/" class="nav-link">TEST</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/yong-forever-blog/server/docker/" aria-current="page" class="nav-link router-link-exact-active router-link-active">《docker》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/javaweb/" class="nav-link">《JavaWeb》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/juc/" class="nav-link">《JUC》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/jvm/" class="nav-link">《JVM》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/mybatis/" class="nav-link">《Mybatis》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/mysql/" class="nav-link">《Mysql》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/redis/" class="nav-link">《Redis》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/springcloud/" class="nav-link">《SpringCloud》</a></li><li class="dropdown-subitem"><a href="/yong-forever-blog/server/design/" class="nav-link">《设计模式》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/yong-forever-blog/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/yong-forever-blog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/yong-forever-blog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/yong-forever-blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/yong-forever-blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/yong-forever-blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yong-forever-blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/yong-forever-blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/yong-forever/yong-forever-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>后端文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>学习笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yong-forever-blog/server/docker/" aria-current="page" class="active sidebar-link">《docker》笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker学习" class="sidebar-link">Docker学习</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker概述" class="sidebar-link">Docker概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker为什么出现" class="sidebar-link">Docker为什么出现？</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker的历史" class="sidebar-link">Docker的历史</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker能干嘛" class="sidebar-link">Docker能干嘛</a></li></ul></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker安装" class="sidebar-link">Docker安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker的基本组成" class="sidebar-link">Docker的基本组成</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#安装docker" class="sidebar-link">安装Docker</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#底层原理" class="sidebar-link">底层原理</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker的常用命令" class="sidebar-link">Docker的常用命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker镜像讲解" class="sidebar-link">Docker镜像讲解</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#容器数据卷" class="sidebar-link">容器数据卷</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#什么是容器数据卷" class="sidebar-link">什么是容器数据卷</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#使用数据卷" class="sidebar-link">使用数据卷</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#实战-安装mysql" class="sidebar-link">实战：安装MySQL</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#具名和匿名挂载" class="sidebar-link">具名和匿名挂载</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#初识dockerfile" class="sidebar-link">初识Dockerfile</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#数据卷容器" class="sidebar-link">数据卷容器</a></li></ul></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#dockerfile" class="sidebar-link">DockerFile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#dockerfile介绍" class="sidebar-link">Dockerfile介绍</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#dockerfile构建过程" class="sidebar-link">DockerFile构建过程</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#dockerfile的指令" class="sidebar-link">DockerFile的指令</a></li></ul></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker网络" class="sidebar-link">Docker网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#理解docker0" class="sidebar-link">理解Docker0</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#link" class="sidebar-link">--link</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#自定义网络" class="sidebar-link">自定义网络</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#实战-部署redis集群" class="sidebar-link">实战：部署Redis集群</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#springboot微服务打包docker镜像" class="sidebar-link">SpringBoot微服务打包Docker镜像</a></li></ul></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#企业实战" class="sidebar-link">企业实战</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker-compose" class="sidebar-link">Docker Compose</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker-swarm" class="sidebar-link">Docker Swarm</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker-stack" class="sidebar-link">Docker Stack</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker-secret" class="sidebar-link">Docker Secret</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#docker-config" class="sidebar-link">Docker Config</a></li><li class="sidebar-sub-header"><a href="/yong-forever-blog/server/docker/#ci-cd-jenkins-流水线" class="sidebar-link">CI/CD Jenkins 流水线</a></li></ul></li><li><a href="/yong-forever-blog/server/javaweb/" class="sidebar-link">《JavaWeb》笔记</a></li><li><a href="/yong-forever-blog/server/juc/" class="sidebar-link">《JUC》笔记</a></li><li><a href="/yong-forever-blog/server/jvm/" class="sidebar-link">《JVM》笔记</a></li><li><a href="/yong-forever-blog/server/mybatis/" class="sidebar-link">《Mybatis》笔记</a></li><li><a href="/yong-forever-blog/server/Mybatis-Plus/" class="sidebar-link">《Mybatis-Plus》笔记</a></li><li><a href="/yong-forever-blog/server/mysql/" class="sidebar-link">《Mysql》笔记</a></li><li><a href="/yong-forever-blog/server/redis/" class="sidebar-link">《Redis》笔记</a></li><li><a href="/yong-forever-blog/server/springcloud/" class="sidebar-link">《SpringCloud》笔记</a></li><li><a href="/yong-forever-blog/server/design/" class="sidebar-link">《设计模式》笔记</a></li></ul></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-70a2d273><div class="articleInfo" data-v-70a2d273><ul class="breadcrumbs" data-v-70a2d273><li data-v-70a2d273><a href="/yong-forever-blog/" title="首页" class="iconfont icon-home router-link-active" data-v-70a2d273></a></li> <li data-v-70a2d273><a href="/yong-forever-blog/categories/?category=%E5%90%8E%E7%AB%AF" title="分类" data-v-70a2d273>后端</a></li> <li data-v-70a2d273><a href="/yong-forever-blog/categories/?category=%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="分类" data-v-70a2d273>学习笔记</a></li> <!----></ul> <div class="info" data-v-70a2d273><div title="作者" class="author iconfont icon-touxiang" data-v-70a2d273><a href="https://gitee.com/yong-forever" target="_blank" title="作者" class="beLink" data-v-70a2d273>yong</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-70a2d273><a href="javascript:;" data-v-70a2d273>2021-05-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          《docker》笔记
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <h2 id="docker学习"><a href="#docker学习" class="header-anchor">#</a> Docker学习</h2> <blockquote><p>Docker 学习</p></blockquote> <ul><li>Docker概述</li> <li>Docker安装</li> <li>Docker命令
<ul><li>镜像命令</li> <li>容器命令</li> <li>操作命令</li> <li>...</li></ul></li> <li>Docker镜像</li> <li>容器数据卷</li> <li>DockerFile</li> <li>Docker网络原理</li> <li>IDEA 整合 Docker</li> <li>Docker Compose</li> <li>Docker Swarm</li> <li>CI\CD Jenkins</li></ul> <h2 id="docker概述"><a href="#docker概述" class="header-anchor">#</a> Docker概述</h2> <h3 id="docker为什么出现"><a href="#docker为什么出现" class="header-anchor">#</a> Docker为什么出现？</h3> <p>一款产品：开发--上线 两套环境！ 应用环境、应用配置！</p> <p>开发人员-----运维人员 ：我在我的电脑可以运行！版本更新，导致服务不可用！对于运维来说，考验就十分大？</p> <p><strong>开发即运维！</strong></p> <p>环境配置是十分麻烦的，每一个机器都要部署环境（集群Redis、ES、Hadoop...）！费时费力</p> <p>发布一个项目(jar（Redis Mysql jdk ES）)或者war...，项目能不能将环境一起安装打包！</p> <p>之前在服务器一个应用的环境 Redis Mysql jdk ES hadoop，配置麻烦了，不能够跨平台。Windows，最后发布到Linux！</p> <p>传统：开发jar，再运维来做！</p> <p>现在：开发打包都上线，一套流程做完！</p> <p>java -- apk -- 发布（应用商店）--使用apk --安装即可用</p> <p>java -- jar（环境）-- 打包项目带上环境（镜像）-- （Dcoker仓库：商店）-- 下载我们发布的镜像 -- 运行即可</p> <p>Docker给以上的问题，提出了解决方案！</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514192147975-1639134601368.png" alt="image-20200514192147975"></p> <p>Docker的思想就来自于集装箱</p> <p>JRE -- 多个应用（端口冲突）-- 原来都是交叉的！</p> <p>隔离：Docker核心思想！打包装箱！每个箱子都是互相隔离的！</p> <p>Docker 通过隔离机制，可以将服务器利用到极致！</p> <p>本质：所有的技术都是因为出现了一些问题，我们需要去解决，采取学习！</p> <h3 id="docker的历史"><a href="#docker的历史" class="header-anchor">#</a> Docker的历史</h3> <p>2010年，几个搞IT的年轻人，就在美国成立了一家公司<code>dotCloud</code></p> <p>做一些pass的云计算服务！Linux 有关的容器技术！</p> <p>他们将自己的技术 （容器化技术）命令 就是 Docker！</p> <p>Docker 刚刚诞生的时候，没有引起行业的注意！dotCloud，活不下去！</p> <p><code>开源</code></p> <p>开发源代码！</p> <p>2013年，Docker开源！</p> <p>越来越多的人发现了docker的优点！火了，Docker 每一个月都会更新一个版本！</p> <p>2014年4月9日，Docker1.0发布！</p> <p>Docker为什么这么火？十分的qingqiao！</p> <p>在容器技术出来之前，我们都是使用虚拟机技术！</p> <p>虚拟机：在window中装一个 VMware，通过这个软件我们可以虚拟出来一台或者多台的电脑！笨重！</p> <p>虚拟机也是属于虚拟化技术，Docker容器技术，也是一种虚拟化技术！</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>vm，linux centos原生镜像（一个电脑） 隔离，需要开启多个虚拟机 几个G 几分钟
docker：隔离，镜像（最核心的环境 jdk+mysql+<span class="token punctuation">..</span>.）十分的小巧，运行环境就可以了！几个M KB 几秒
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>到现在，所有开发人员都要学会Docker！</p> <blockquote><p>聊聊Docker</p></blockquote> <p>Docker 是基于 Go 语言开发的！开源项目！</p> <p>官网：https://www.docker.com/</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514193903348-1639134605079.png" alt="image-20200514193903348"></p> <p>文档：https://docs.docker.com/ Docker的文档是超级详细的！</p> <p>仓库地址：https://hub.docker.com/</p> <h3 id="docker能干嘛"><a href="#docker能干嘛" class="header-anchor">#</a> Docker能干嘛</h3> <blockquote><p>之前的虚拟机技术！</p></blockquote> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514194241959-1639134612146.png" alt="image-20200514194241959"></p> <p>虚拟机技术缺点：</p> <ol><li>资源占用十分多</li> <li>荣誉步骤多</li> <li>启动很慢</li></ol> <blockquote><p>容器化技术</p></blockquote> <p><font color="red">容器化技术不是模拟的一个完整的操作系统</font></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514194535196-1639134615548.png" alt="image-20200514194535196"></p> <p>比较Docker和虚拟机技术的不同：</p> <ul><li>传统虚拟机、虚拟出一条因该你，运行一个完整的操作系统，然后在这个系统上安装和运行软件</li> <li>容器内的应用直接运行在 宿主机的内容，容器时没有自己的内核的，也没有虚拟我们的硬件，所以就轻便了</li> <li>每个容器相互管理，每一个容器内都有一个自己的文件系统，互不影响</li></ul> <blockquote><p>DevOps (开发、运维)</p></blockquote> <p><strong>应用更快速的交付和部署</strong></p> <p>传统：一堆帮助文档，安装程序</p> <p>Docker：一键运行，打包镜像发布测试</p> <p><strong>更便捷的升级和扩缩容</strong></p> <p>使用了Docker之后，我们部署应用就和搭积木一样！</p> <p>（SpringBoot 1.5	Redis 5 	tomcat 8 ）升级</p> <p>项目打包为一个镜像，扩展，服务器A！服务器B</p> <p><strong>更简单的系统运维</strong></p> <p>在容器化之后，我们的开发，测试环境都是高度一致的。</p> <p><strong>更高效的计算资源利用</strong></p> <p>Docker 是内核级别的虚拟化，可以再一个物理机上运行很多的容器实例！服务器的性能可以被压榨到极致。</p> <h2 id="docker安装"><a href="#docker安装" class="header-anchor">#</a> Docker安装</h2> <h3 id="docker的基本组成"><a href="#docker的基本组成" class="header-anchor">#</a> Docker的基本组成</h3> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/u=378500507,2500759843&amp;fm=15&amp;gp=0-1639134618459.jpg" alt="img"></p> <p><strong>镜像（image）</strong>：</p> <p>docker镜像就好比是一个模板，可以通过这个模板来创建容器服务，tomcat镜像== &gt;run ==&gt;tomcat01 容器（提供服务器），通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器中的）</p> <p><strong>容器（container）</strong>：</p> <p>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建。</p> <p>启动，停止，删除，基本命令！</p> <p>目前就可以把这个容器理解为一个建议的linux系统</p> <p><strong>仓库（repositiory）</strong>：</p> <p>仓库就是存放镜像的地址！</p> <p>仓库分为公有仓库和私有仓库！</p> <p>Docker Hub（默认是国外的）</p> <p>阿里云等都有容器服务器（配置镜像加速！）</p> <h3 id="安装docker"><a href="#安装docker" class="header-anchor">#</a> 安装Docker</h3> <blockquote><p>环境准备</p></blockquote> <ol><li>需要会一点带你的linux的基础</li> <li>CentOS 7</li> <li>我们需要使用Xshell 连接远程服务器进行操作！</li></ol> <blockquote><p>环境查看</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">uname</span> 

<span class="token function">cat</span> /ect/os/os-release
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>帮助文档:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1.卸载旧的版本</span>
$ <span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
                  
<span class="token comment">#2.需要的安装包</span>
$ <span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils

<span class="token comment">#3.设置镜像仓库</span>
$ <span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo https://0bypmxdk.mirror.aliyuncs.com
<span class="token comment">#默认国外地址    https://download.docker.com/linux/centos/docker-ce.repo</span>
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

<span class="token comment">#更新 yum </span>
$ <span class="token function">sudo</span> yum makecache fast

<span class="token comment">#4.安装docker ce社区 ee企业版</span>
$ <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io

<span class="token comment">#5.启动docker</span>
$ <span class="token function">sudo</span> systemctl start <span class="token function">docker</span>

<span class="token comment">#6.查看版本</span>
$ <span class="token function">sudo</span> <span class="token function">docker</span> version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#7.hello-world</span>
$ <span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#8.查看一下 下载的这个镜像</span>
$ <span class="token function">sudo</span> <span class="token function">docker</span> images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.卸载</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#1.卸载资源</span>
$ <span class="token function">sudo</span> yum remove docker-ce docker-ce-cli containerd.io
<span class="token comment">#2.删除资源</span>
$ <span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker

/var/lib/docker 默认工作路径
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>3.配置使用</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker

<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://0bypmxdk.mirror.aliyuncs.com&quot;]
}
EOF</span>

<span class="token function">sudo</span> systemctl daemon-reload

<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id=""><a href="#" class="header-anchor">#</a></h4> <h4 id="回顾helloworld流程"><a href="#回顾helloworld流程" class="header-anchor">#</a> 回顾helloworld流程</h4> <h3 id="底层原理"><a href="#底层原理" class="header-anchor">#</a> 底层原理</h3> <p><strong>Docker是怎么工作的？</strong></p> <p>Docker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socket从客户端访问！</p> <p>DockerServer接收到Docker-Client指令,就会执行这个命令</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514202922893-1639134621439.png" alt="image-20200514202922893"></p> <p><strong>Docker为什么比VM快？</strong></p> <ol><li>Docker有着比虚拟机更少的抽象层</li> <li>docker利用的是宿主机的内核，vm需要时Guest OS</li></ol> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/timg-1639134624921.jpg" alt="img"></p> <p>所以新建一个容器的时候，docker不需要像虚拟机一样加载一个操作系统内核，避免引导界面，虚拟机加载Guest OS，而docker是利用宿主机的操作系统，省略了复杂的进程</p> <h3 id="docker的常用命令"><a href="#docker的常用命令" class="header-anchor">#</a> Docker的常用命令</h3> <h4 id="帮助命令"><a href="#帮助命令" class="header-anchor">#</a> 帮助命令</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> version	<span class="token comment">#显示docker的版本信息</span>
<span class="token function">docker</span> info	<span class="token comment">#显示docker的详细信息</span>
<span class="token function">docker</span> <span class="token parameter variable">--help</span> <span class="token comment">#帮助命令</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>帮助文档的地址：https://docs.docker.com/reference/</p> <h4 id="镜像命令"><a href="#镜像命令" class="header-anchor">#</a> 镜像命令</h4> <p><strong>docker images</strong> 查看所有本地主机的镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> images

<span class="token comment">##</span>
REPOSITIORY 镜像的仓库
TAG			镜像的标签
IMAGE ID	镜像的id
CREATED		镜像的创建时间
SIZE		镜像的大小

<span class="token function">docker</span> images 
<span class="token comment">#可选项</span>
<span class="token parameter variable">-a</span>		<span class="token comment">#显示所有镜像信息</span>
<span class="token parameter variable">-q</span>		<span class="token comment">#显示所有镜像id</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>docker镜像搜索</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> search mysql 


<span class="token comment">#可选项，通过收藏过滤</span>
<span class="token parameter variable">--filter</span><span class="token operator">=</span>STARS<span class="token operator">=</span><span class="token number">3000</span> <span class="token comment">#收藏大于3000的</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>docker pull下载镜像</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> pull mysql <span class="token comment">#docker pull io/lib/mysql：laster</span>
<span class="token comment"># docker pull 镜像名[tag] 不写tag默认最新版本</span>

<span class="token function">docker</span> pull mysql5.7 <span class="token comment">#指定版本下载</span>
<span class="token comment">#分层下载，docker image的核心 联合文件系统 5.7与8.0相同文件不会再下载 共有</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>docker remove删除镜像</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> 镜像id <span class="token comment">#删除指定id镜像</span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> 镜像id 镜像id 镜像id <span class="token comment">#删除多个镜像</span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> -<span class="token variable">${docker images -aq}</span> <span class="token comment">#删除多个镜像</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="容器命令"><a href="#容器命令" class="header-anchor">#</a> 容器命令</h4> <p><strong>说明：我们有了镜像才可以创建容器，linux，下载一个centos镜像来测试学习</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> pull centos
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>新建容器并启动</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token punctuation">[</span>可选参数<span class="token punctuation">]</span> image

<span class="token comment"># 参数说明</span>
<span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;名字&quot;</span>	容器名字 tomcat01，tomcat02，区分容器
<span class="token parameter variable">-d</span>			后台运行
<span class="token parameter variable">-it</span>			使用交互运行，进入容器查看内容
<span class="token parameter variable">-p</span> 			指定容器端口 -p8080：8081
	<span class="token parameter variable">-p</span> ip:主机端口：容器端口
	-p主机端口：容器端口（常用）
	-p容器端口
	容器端口
<span class="token parameter variable">-p</span>		随机指定端口
<span class="token parameter variable">--rm</span> 用完即删 测试用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#调试、启动并进入容器</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> centos /bin/bash
<span class="token builtin class-name">exit</span> <span class="token comment">#退出容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>查看运行的容器</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">ps</span>

<span class="token comment"># 可选项</span>
<span class="token parameter variable">-a</span> <span class="token comment">#列出当前正在运行的容器+历史运行过的容器</span>
<span class="token parameter variable">-n</span><span class="token operator">=</span>? <span class="token comment">#显示最佳创建的容器</span>
<span class="token parameter variable">-q</span> <span class="token comment">#只显示容器编号</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>退出容器</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">exit</span> <span class="token comment">#退出容器并停止</span>
ctrl+P+Q <span class="token comment">#退出容器不停止</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>删除容器</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">rm</span> 容器id <span class="token comment">#删除指定id容器，运行的容器不能删除 </span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable">${docker ps -aq}</span> <span class="token comment">#删除所有id容器</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> -q<span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">docker</span> <span class="token function">rm</span> <span class="token comment">#删除所有容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>启动和停止容器</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> start 容器id	<span class="token comment">#启动</span>
<span class="token function">docker</span> restart 容器id	<span class="token comment">#重启</span>
<span class="token function">docker</span> stop 容器id	<span class="token comment">#停止</span>
<span class="token function">docker</span> <span class="token function">kill</span> 容器id	<span class="token comment">#强制停止</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="常用的其他命令"><a href="#常用的其他命令" class="header-anchor">#</a> 常用的其他命令</h4> <p>后台启动容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#docker run -d 镜像名</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> centos <span class="token comment">#停止了</span>

<span class="token comment">#常见的坑 docker容器使用后台运行，如果没有前台进程，就会自动停止</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>查看日志</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> logs <span class="token parameter variable">--help</span>


<span class="token comment">#显示日志</span>
<span class="token parameter variable">-tf</span> <span class="token comment">#显示日志</span>
<span class="token parameter variable">-tail</span> num <span class="token comment">#显示日志条数</span>


<span class="token comment">#docker logs -f -t --tail num 容器id</span>
<span class="token function">docker</span> logs <span class="token parameter variable">-tf</span> <span class="token parameter variable">--tail</span> <span class="token number">5</span> 容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>查看容器中进程信息</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#命令 docker top 容器id</span>
<span class="token function">docker</span> <span class="token function">top</span> 容器id

<span class="token function">docker</span> <span class="token function">top</span> 容器id


<span class="token function">docker</span> inspect <span class="token parameter variable">--help</span>
dokcer inspect 容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>进入当前运行的容器</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#我们通常容器都是后台方式运行的，需要进入容器，修改配置</span>

<span class="token comment">#命令</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器id /bin/bash  <span class="token comment">#进入新的终端窗口(常用)</span>


<span class="token comment">#方式二</span>
<span class="token function">docker</span> attach 容器id /bin/bash <span class="token comment">#进入当前的终端窗口</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>从容器拷贝文件到主机上</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">cp</span> 主机路径

<span class="token comment">#1.进入容器内部</span>
<span class="token function">docker</span> attach 容器id
<span class="token comment">#2.在容器内新建文件</span>
<span class="token function">touch</span> yong.java
<span class="token comment">#3.推出容器</span>
<span class="token builtin class-name">exit</span>
<span class="token comment">#4.将文件拷贝出来到主机上</span>
<span class="token function">docker</span> <span class="token function">cp</span> 容器id:/home/test.java /home

<span class="token comment">#拷贝是一个手动过程，未来我们使用 -卷的技术，可以实现</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h4> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514214450812-1639134629228.png" alt="image-20200514214450812"></p> <h4 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> search tomcat
docke pull tomcat

<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3355</span>:8080 <span class="token parameter variable">--name</span> tomcat01 tomcat

<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> tomcat01 /bin/bash

<span class="token comment">#问题：1.linux命令少了 2.没有webapps 、阿里云镜像的原因，默认最小的镜像，所有不必要的</span>
<span class="token function">cp</span> <span class="token parameter variable">-r</span> webapps.dist/* webapps

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>部署es+kibana</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># es 暴露的端口很多</span>
<span class="token comment"># es 十分的耗内存</span>
<span class="token comment"># es 的数据一般要放逐到安全目录！挂在</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> elasticsearch <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> elasticsearch:7.6.2
<span class="token comment">#这会非常的卡卡卡卡卡</span>

<span class="token comment"># docker stats 查看cpu状态</span>

<span class="token comment"># es 是十分耗内存的</span>

<span class="token comment"># 查看 docker stats</span>

<span class="token comment"># 测试 es是否成功了</span>
<span class="token function">curl</span> localhost:9200

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 赶紧关掉，增加内存的限制，修改配置文件 -e 环境配置修改</span>
<span class="token function">docker</span> stop <span class="token function">id</span>

<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> elasticsearch <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token parameter variable">-e</span> ES_JAVA-OPTS<span class="token operator">=</span><span class="token string">&quot;-Xms64m -Xmx512m&quot;</span> elasticsearch:7.6.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>作业：使用kibana</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514222610085-1639134632267.png" alt="image-20200514222610085"></p> <h4 id="可视化"><a href="#可视化" class="header-anchor">#</a> 可视化</h4> <ul><li><p>portainer(先用这个)</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8088</span>:9000 <span class="token punctuation">\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="token parameter variable">--privileged</span> protainer/portainer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>Rancher(CI/CD 再用)</p></li></ul> <p><strong>什么是protainer</strong></p> <p>Docker 图形界面管理工具！提供一个后台面板提供我们操作！</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8088</span>:9000 <span class="token punctuation">\</span>
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="token parameter variable">--privileged</span> protainer/portainer
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>访问测试：http://ip:8088/</p> <h2 id="docker镜像讲解"><a href="#docker镜像讲解" class="header-anchor">#</a> Docker镜像讲解</h2> <h4 id="镜像是什么"><a href="#镜像是什么" class="header-anchor">#</a> 镜像是什么</h4> <p>镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。</p> <p>如何得到镜像：</p> <ul><li>从远程仓库下载</li> <li>朋友拷贝</li> <li>自己制作</li></ul> <h4 id="docker镜像加载原理"><a href="#docker镜像加载原理" class="header-anchor">#</a> Docker镜像加载原理</h4> <blockquote><p>UnionFS（联合文件系统）</p></blockquote> <p>UnionFS（联合文件系统）：Union文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同事可以将不同目录挂载到同一个虚拟文件系统下（Unite serveral directories into a single virtual filesystem）。Union文件系统是Docker的基础。镜像可以通过分层来继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。</p> <p>特性：一次同时加载多个文件系统，但是从外面看来，只能看到一个文件系统，来拟合加载会把各层文件系统叠加卡里，这样最终的文件系统会包含所有的底层和文件目录</p> <blockquote><p>Docker镜像加载原理</p></blockquote> <p>docker的镜像实际上是由一层一层的文件系统组成，这种层级的文件系统UnionFS。</p> <p>bootfs（boot file system）主要包含bootloader和kernel，bootloader主要引导加载kernel，Linux刚启动时会加载bootfs文件系统，再Docker镜像的最底层是bootfs。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</p> <p>rootfs（root file sytem），再bootfs之上，包含的就是典型Linux系统中的/dev，/proc，/bin，/etc等标准目录和文件，rootfs就是各种不同的操作系统的发行版，比如Ubuntu，CentOS等等。</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514230413951-1639134636281.png" alt="image-20200514230413951"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514230531286-1639134641463.png" alt="image-20200514230531286"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514230800112-1639134645915.png" alt="image-20200514230800112"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514230920123-1639134648973.png" alt="image-20200514230920123"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514231014722-1639134652164.png" alt="image-20200514231014722"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200514231152698-1639134655314.png" alt="image-20200514231152698"></p> <h4 id="commit镜像"><a href="#commit镜像" class="header-anchor">#</a> commit镜像</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> commit 提交容器成为一个新的副本
<span class="token function">docker</span> commit  <span class="token parameter variable">-m</span> <span class="token string">&quot;提交的描述信息&quot;</span> <span class="token parameter variable">-a</span><span class="token operator">=</span><span class="token string">&quot;作者&quot;</span> 目标镜像名<span class="token punctuation">[</span>TAG<span class="token punctuation">]</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-p</span>

<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器id /bin/bash

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>实战测试</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 启动一个默认的tamcat</span>

<span class="token comment"># 发现这个默认的tomcat 是没有webapps应用</span>

<span class="token comment">#拷贝进去基本的文件</span>

<span class="token comment">#将给我们的容器通过commit提交为一个镜像</span>
<span class="token function">docker</span> commit <span class="token parameter variable">-a</span><span class="token operator">=</span><span class="token string">&quot;yong&quot;</span> <span class="token parameter variable">-m</span><span class="token operator">=</span><span class="token string">&quot;add webapps app&quot;</span> 容器id tomcat02:1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="容器数据卷"><a href="#容器数据卷" class="header-anchor">#</a> 容器数据卷</h2> <h3 id="什么是容器数据卷"><a href="#什么是容器数据卷" class="header-anchor">#</a> 什么是容器数据卷</h3> <p><strong>docker的理念回顾</strong></p> <p>讲应用和环境打包成一个镜像！</p> <p>数据？如果数据都早容器中，那么我们容器和三处，数据就会丢失！需求：数据可以持久化</p> <p>Mysql，容器删了，数据就没了！Mysql数据可以储存到本地</p> <p>容器之间可以有一个数据共享的技术！Docker容器中产生的数据，同步到本地！</p> <p>这就是卷技术！目录的瓜子，将我们的容器内的目录，挂载到linux上面！</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515190846545-1639134688682.png" alt="image-20200515190846545"></p> <p><strong>总结一句话：容器的持久化和同步操作！容器间可是可以数据共享的</strong></p> <h3 id="使用数据卷"><a href="#使用数据卷" class="header-anchor">#</a> 使用数据卷</h3> <blockquote><p>方式一：直接使用命令 -v</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-p</span> 主机目录:容器内目录 

<span class="token comment">#测试</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-p</span> /home/ceshi:/home centos /bin/bash

<span class="token comment">#启动起来之后 通过 docker inspect 容器id  查看</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>双向绑定</p> <p>再来测试</p> <ol><li>停止容器</li> <li>修改宿主机上的文件</li> <li>启动容器</li> <li>发现容器文件同步了宿主机</li></ol> <p>好处：我们修改只需要再本地修改即可，容器会自动同步</p> <h3 id="实战-安装mysql"><a href="#实战-安装mysql" class="header-anchor">#</a> 实战：安装MySQL</h3> <p>思考：mysql的数据持久化问题!</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515192713361-1639134692569.png" alt="image-20200515192713361"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#下载镜像</span>
<span class="token function">docker</span> pull mysql:5.7

<span class="token comment">#运行容器，需要进行挂载 #安装启动mysql的时候 </span>
<span class="token function">docker</span>
<span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>my-secret-pw

<span class="token comment">#启动我们的</span>
<span class="token parameter variable">-d</span> 后台运行
<span class="token parameter variable">-p</span> 端口映射
<span class="token parameter variable">-v</span> 挂载
<span class="token parameter variable">--name</span> 容器名字

dovker run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-v</span> /home/mysql/conf:/etc/mysql/conf.d -v/home/mysql/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token parameter variable">--name</span> mysql01 mysql:5.7


<span class="token comment">#启动之后，我们再本地使用sqlyog来调试一下</span>
<span class="token comment">#sqlyog连接3306 和容器</span>

<span class="token comment">#本地测试创建一个数据，查看一下映射配置是否成功</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>假设我们将容器删除</p> <p>发现，我们挂载到本地的数据卷依旧没有丢失，实现了容器数据化功能！</p> <h3 id="具名和匿名挂载"><a href="#具名和匿名挂载" class="header-anchor">#</a> 具名和匿名挂载</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#匿名挂载</span>

<span class="token parameter variable">-v</span> 容器内路径！
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> name niginx01 <span class="token parameter variable">-v</span> /ect/nginx nginx <span class="token comment">#没有指定主机路径</span>

<span class="token comment">#docker volume --help</span>

<span class="token comment">#查看所有卷的情况</span>
<span class="token function">docker</span> volume <span class="token function">ls</span>
<span class="token comment">#这发现,这中就是匿名挂载，我们 -v 只写了容器内路径，没有写容器外路径</span>

<span class="token comment">#具名    卷名:容器内路               juming-nginx前面不要写/</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> name niginx01 <span class="token parameter variable">-v</span> juming-nginx:/ect/nginx nginx
 
<span class="token comment">#查看这个卷 </span>
<span class="token function">docker</span> inspect juming-nginx
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>所有的docker内的卷 cd /var/lib/docker/volumes/xxx/_data</p> <p>我们通过具名可方便我们找到一个卷，大多数使用<code>具名挂载</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#如何确定具名挂载还是匿名挂载，还是指定路径挂载</span>
<span class="token parameter variable">-v</span> 容器内路径 <span class="token comment">#匿名挂载</span>
<span class="token parameter variable">-v</span> 具名:容器内路径 <span class="token comment">#具名挂载</span>
<span class="token parameter variable">-v</span> 宿主机路径:容器内路径 <span class="token comment">#路径挂载</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>扩展：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 通过 -v 容器内陆就 ro rw 改变独秀权限</span>
ro <span class="token builtin class-name">readonly</span> <span class="token comment">#只读</span>
rw readwrite <span class="token comment">#可读可写</span>


<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token parameter variable">--name</span> nginx02 <span class="token parameter variable">-v</span> juming-nginx:/etc/nginx:ro niginx
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token parameter variable">--name</span> nginx02 <span class="token parameter variable">-v</span> juming-nginx:/etc/nginx:rw niginx

<span class="token comment">#ro 说明这个路径只能通过宿主机操作，容器内是无法操作的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="初识dockerfile"><a href="#初识dockerfile" class="header-anchor">#</a> 初识Dockerfile</h3> <p>Dockerfile 就是用来构建 docker镜像的构建文件!命令脚本！</p> <blockquote><p>方式二</p></blockquote> <p>通过这个脚本可以生成镜像，镜像是一层一层的，脚本是一个命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#创建一个dockefile文件，名字建议DockerFile</span>
<span class="token function">mkdir</span> docker-test-volume
<span class="token function">vim</span> dockerfile1

<span class="token comment">#文件中的内容 指令大写</span>
FROM centos
VOLUME <span class="token punctuation">{</span><span class="token string">&quot;volume01&quot;</span>,<span class="token string">&quot;volume02&quot;</span><span class="token punctuation">}</span>
CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;-------end--------&quot;</span>
CMD /bin/bash
<span class="token comment">#这里的每一个镜像就是一个命令</span>

<span class="token function">docker</span> build <span class="token parameter variable">-f</span> /home/docker-test-volume/dockerfile1 <span class="token parameter variable">-t</span> yong/centos:1.0

<span class="token function">docker</span> run <span class="token parameter variable">-it</span> 容器id /bin/bash

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这个（匿名）卷一定和外部有一个同步的目录</p> <p>docker inspect 容器id 确实是一个匿名卷</p> <p>这种方式我们未来使用的十分多，因为我们通常会构建自己的镜像！</p> <p>假设构建镜像的时候没有挂载卷，要手动镜像 -v 挂载</p> <h3 id="数据卷容器"><a href="#数据卷容器" class="header-anchor">#</a> 数据卷容器</h3> <p>多个mysql同步数据</p> <p>命名的容器挂载数据卷</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515200356210-1639134696062.png" alt="image-20200515200356210"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 通过刚才的镜像 测试多个容器 这里是实例centos，centos，centos，centos</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-name</span> docker01 镜像id 

ctrl+p+q退出当前容器

<span class="token comment">#--volume-from 实现容器间的共享</span>
<span class="token comment">#绑定docker01 ，类似java继承,不需要写镜像id</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-name</span> docker02 --volume-from docker01 yong/centos:1.0

<span class="token comment">#在进入docker01</span>
<span class="token builtin class-name">cd</span> volumen01 
<span class="token function">touch</span> d01.txt

ctrl+p+q退出当前容器

<span class="token comment">#在进入docker02</span>
volumen01 下 也有d01.txt

<span class="token comment">#多个继承挂载是一样的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 只要还有容器还在用数据，不管删除哪一个容器，数据都不会删除</span>
<span class="token comment"># 数据卷容器的生命周期一直持续到没有容器使用为止</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> DockerFile</h2> <h3 id="dockerfile介绍"><a href="#dockerfile介绍" class="header-anchor">#</a> Dockerfile介绍</h3> <p>dockerfile是用来构建docker镜像的文件！命令参数脚本</p> <p>构建步骤：</p> <ol><li>编写一个dockerfile文件</li> <li>docker build 构建成为一个镜像</li> <li>docker run 运行镜像</li> <li>docker push 发布镜像（DockerHub，阿里云镜像仓库）</li></ol> <p>查看官方是怎么做的</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515203518847-1639134699571.png" alt="image-20200515203518847"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515203602841-1639134706086.png" alt="image-20200515203602841"></p> <p>很多官方的镜像都是基础包，很多功能没有，我们需要通常会自己搭建自己的镜像！</p> <p>官方可以，我们也可以制作镜像！</p> <h3 id="dockerfile构建过程"><a href="#dockerfile构建过程" class="header-anchor">#</a> DockerFile构建过程</h3> <p><strong>基础知识：</strong></p> <ol><li>每一个保留关键字（指令）都必须是大写字母</li> <li>执行从上到下</li> <li>#表示注释</li> <li>每一个指令都会创建提交一个新的镜像层，</li></ol> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515204024998-1639134711636.png" alt="image-20200515204024998"></p> <p>dockerfile是面向开发的，我们以后要发布项目，做镜像，就需要编写dockerfile文件，这个文件十分简单！</p> <p>Docker镜像逐渐成为企业交付的标准，必须掌握！</p> <p>DockerFile：构建文件，定义了一切的步骤，源代码</p> <p>DockerImages：通过DockerFile构建生成的镜像，最终发布和运行的产品</p> <p>Docker容器：容器就是镜像运行起来提供服务器</p> <h3 id="dockerfile的指令"><a href="#dockerfile的指令" class="header-anchor">#</a> DockerFile的指令</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>FROM		<span class="token comment">#基础镜像,一切从这里构建 centos</span>
MAINTAINER	<span class="token comment">#镜像是谁写的，姓名+邮箱</span>
RUN			<span class="token comment">#镜像构建的时候需要运行的命令</span>
ADD			<span class="token comment">#步骤，tomcat镜像，这个tomcat压缩包，添加内容</span>
WORKDIR		<span class="token comment">#镜像的工作目录</span>
VOLUME		<span class="token comment">#挂载的目录</span>
EXPOSE		<span class="token comment">#指定暴露端口</span>
RUN			<span class="token comment">#最终运行</span>
CMD			<span class="token comment">#指定这个容器启动时要运行的命令,只要最后一个会生效，可被替代</span>
ENTRYPOINT	<span class="token comment">#指定这个容器启动时要运行的命令，可以追加命令</span>
ONBUILD		<span class="token comment">#当构建一个被继承 DockerFile 这时候会允许 ONBUILD 的指令</span>
COPY		<span class="token comment">#类似ADD命令，将我们的文件拷贝到镜像中</span>
ENV			<span class="token comment">#构建的时候设置环境变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="实战测试"><a href="#实战测试" class="header-anchor">#</a> 实战测试</h4> <p>Docker Hub 中 99% 都是从基础镜像过来的 From srcatch，然后配置需要的软件和配置来进行的构建</p> <blockquote><p>创建一个自己的centos</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> dockerfiles
<span class="token function">vim</span> mydfcentos

<span class="token comment">#编写mydfcentos文件</span>
<span class="token variable"><span class="token variable">`</span>
FROM centos
MAINTAINER yong<span class="token operator">&lt;</span><span class="token number">1258225956</span>@qq.com<span class="token operator">&gt;</span>

ENV MYPATH /usr/local
WORKDIR $MYPATH

RUN yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">vim</span> <span class="token comment">#添加vim</span>
RUN yum <span class="token parameter variable">-y</span> <span class="token function">install</span> net-tools <span class="token comment">#添加网络</span>

EXPOSE <span class="token number">80</span>

CMD <span class="token builtin class-name">echo</span> $MYPATH
CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;---end---&quot;</span>

CMD /bin/bash
<span class="token variable">`</span></span>

<span class="token comment">#构建-f dockerfile文件路径 -t 镜像名[TAG]</span>
<span class="token function">docker</span> build <span class="token parameter variable">-f</span> mydfcentos <span class="token parameter variable">-t</span> mycentos:1.0 <span class="token builtin class-name">.</span><span class="token comment">#这里有一点</span>


<span class="token function">docker</span> run <span class="token parameter variable">-it</span> mycentos:1.0 

<span class="token builtin class-name">pwd</span> 进入工作目录对应 <span class="token comment">#ENV MYPATH /usr/local WORKDIR $MYPATH</span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>我们可以查看官方的镜像生成记录</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看生成记录</span>
<span class="token function">docker</span> <span class="token function">history</span> 镜像id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>CMD命令和ENTRYPOINT命令的区别</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>CMD			<span class="token comment">#指定这个容器启动时要运行的命令,只要最后一个会生效，可被替代</span>
ENTRYPOINT	<span class="token comment">#指定这个容器启动时要运行的命令，可以追加命令</span>

<span class="token comment">#测试CMD</span>
FROM centos
CMD <span class="token punctuation">{</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">}</span> <span class="token comment">#进入就会自动展开ls -a</span>


<span class="token function">docker</span> run 镜像id <span class="token parameter variable">-l</span> <span class="token comment">#不能追加命令</span>



<span class="token comment">#测试ENTRYPOINT </span>
ENTRYPOINT <span class="token punctuation">{</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">}</span>
<span class="token function">docker</span> run 镜像id <span class="token parameter variable">-l</span> <span class="token comment">#可以追加命令 追加成 ls -a -l</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="实现-tomcat镜像"><a href="#实现-tomcat镜像" class="header-anchor">#</a> 实现：Tomcat镜像</h4> <ol><li>准备镜像文件 tomcat 压缩包，jdk的压缩包！</li> <li>编写dockerfile文件</li> <li></li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> tomcat
<span class="token builtin class-name">cd</span> tomcat 
<span class="token comment">#添加 tomcat 压缩包，jdk的压缩包</span>

<span class="token function">touch</span> readme.txt <span class="token comment">#帮助文档</span>
<span class="token function">vim</span> Dockerfile <span class="token comment">#官方命令 Dockerfile 不需要写 -f 查找路径</span>

FROM centos
MAINTAINER yong<span class="token operator">&lt;</span><span class="token number">1258225956</span>@qq.com<span class="token operator">&gt;</span>

COPY readme.txt /useer/local/readme.txt

ADD jdk.xxxx.tar.gz /user/local/ <span class="token comment">#ADD 自动解压缩</span>
ADD apche.tomcat.xxxx.tar.gz /user/local/

RUN yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">vim</span> <span class="token comment">#添加vim</span>

ENV MYPATH /usr/local
WORKDIR <span class="token variable">$MYPATH</span>

ENV JAVA_HOME /usr/local/jdk_xxxx
ENV ClASSPATH <span class="token variable">$JAVA_HOME</span>/lib/dt.jar<span class="token punctuation">;</span><span class="token variable">$JAVA_HOME</span>/lib/tools.jar
ENV CATALINA_HOME /usr/local/apache-tomcat.xxx
ENV CATALINA_BASH /usr/local/apache-tomcat.xxx
ENV <span class="token environment constant">PATH</span> <span class="token variable">$PATHJAVA_HOME</span>/bin<span class="token punctuation">;</span><span class="token variable">$CATALINA_HOME</span>/lib<span class="token punctuation">;</span><span class="token variable">$CATELINA_HOME</span>/bin

EXPOSE <span class="token number">8080</span>

CMD /usr/local/apche-tomcat-xxxx/bin/startup.sh %% <span class="token function">tail</span> <span class="token parameter variable">-F</span> /url/local/apche-tomcat-xxxx/bin/logs/catalina.out
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515212815661-1639134716962.png" alt="image-20200515212815661"></p> <p>3、构建镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker build -t diytomcat</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4、启动镜像</p> <p>5、测试</p> <p>6、发布项目</p> <h4 id="发布自己的镜像"><a href="#发布自己的镜像" class="header-anchor">#</a> 发布自己的镜像</h4> <blockquote><p>DockerHub</p></blockquote> <ol><li><p>注册自己账号并登录</p></li> <li><p>在我们的服务器上提交自己的镜像</p></li> <li><p>登录</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> login <span class="token parameter variable">--help</span>

<span class="token function">docker</span> login <span class="token parameter variable">-u</span>

<span class="token function">docker</span> tag 镜像名<span class="token punctuation">[</span>TAG<span class="token punctuation">]</span> <span class="token comment">#修改tag</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>docker push 作者/镜像[TAG]</p></li></ol> <p>提交的时候也是按照层级进行提交的</p> <blockquote><p>阿里云镜像服务上</p></blockquote> <ol><li>登录阿里云</li> <li>找到容器镜像服务</li> <li>创建命名空间</li> <li>创建容器镜像</li> <li>浏览阿里云页面，操作介绍十分详细</li></ol> <h4 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h4> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515220504564-1639134720767.png" alt="image-20200515220504564"></p> <h2 id="docker网络"><a href="#docker网络" class="header-anchor">#</a> Docker网络</h2> <h3 id="理解docker0"><a href="#理解docker0" class="header-anchor">#</a> 理解Docker0</h3> <p>清空所有环境</p> <blockquote><p>测试</p></blockquote> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515223221334-1639134724829.png" alt="image-20200515223221334"></p> <p>三个网络</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 问题 docker 是如何处理网络访问的?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token parameter variable">--name</span> tamcat01 tomcat

<span class="token comment">#查看容器的内部网络地址 ip addr会得到一个 eht0@if262 ip地址，docker分配的</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> tomcat01 <span class="token function">ip</span> addr

<span class="token comment">#服务器（宿主机）可以ping通docker 容器内部</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>原理</p></blockquote> <ol><li><p>我们每启动一个docker容器，docker就会给其分配一个ip，我们只要安装了docker，就会有一个网卡docker0交接模式，使用的技术是veth-pair技术！再次测试 ip addr<img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515224106174-1639134728959.png" alt="image-20200515224106174"></p></li> <li><p>在启动一个容器测试,发现又多了一对网卡</p> <ol><li></li></ol> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515224115938-1639134735201.png" alt="image-20200515224115938"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#我们发这个容器带来的网卡 都是对对的</span>
<span class="token comment">#evth-pair 就是一堆的虚拟设备接口，他们都是成对出现的，一段连着协议，一段彼此相连</span>
<span class="token comment">#正因为这个特性 veth-pair充当一个桥梁，连接各种虚拟网络设备的</span>
<span class="token comment">#OpenStac，Docker容器之间的连接，OVS的连接，都是使用veth-pair连接</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>我们来测试 tomcat01和tomcat02是否可以ping通</p></li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#容器之间是可以ping通的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515224956788-1639134739336.png" alt="image-20200515224956788"></p> <p>结论：tomcat01和tomcat02是公用的一个路由器 docker0</p> <p>所有的容器不指定网络的情况下，都是docker0路由的，docker会给我们的容器分配一个默认的可用ip</p> <p>255.255.0.1/16 域</p> <blockquote><p>小结</p></blockquote> <p>Docker使用的是Linux的桥接</p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515225449704-1639134743163.png" alt="image-20200515225449704"></p> <p>Docker 中的所有的网络接口都是虚拟的，虚拟的转发效率高！</p> <p>只要容器删除，对应的网桥对就没了！</p> <h3 id="link"><a href="#link" class="header-anchor">#</a> --link</h3> <blockquote><p>思考一个场景，我们i安歇了一个微服务，database url=ip: ,项目不重启，数据库ip换掉了，我们希望可以处理这个问题，可以通过名字来进行访问容器？</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> tomcat01 <span class="token function">ping</span> tomcat02
<span class="token comment">#这样不能ping 通</span>

<span class="token comment">#新建容器tomcat --link 来连接tomcat02</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token parameter variable">--name</span> tamcat03 <span class="token parameter variable">--link</span> tomcat02 tomcat

<span class="token comment">#tomcat03可以ping 通 tomcat02，但是tomcat02不能ping 通 tomcat03</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>探究:docker network inspect {id}</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hosts

<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> tomcat03 <span class="token function">cat</span> /etc/hosts



<span class="token parameter variable">--link</span> 就是再host2配置中增加了 tomcat02 的映射
<span class="token comment"># 真实开发已经不推荐使用了</span>
<span class="token comment">#自定义网络！不适应docker0！</span>
<span class="token comment">#docker0问题:不支持容器名连接访问</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="自定义网络"><a href="#自定义网络" class="header-anchor">#</a> 自定义网络</h3> <blockquote><p>查看所有的docker网络 docker network ls</p></blockquote> <p><strong>网络模式</strong></p> <p>bridge：桥接 docker（默认）</p> <p>none：不配置网络</p> <p>host：和宿主机共享网络</p> <p>container：容器网络连通（用的少，局限很大）</p> <p><strong>测试</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#我们直接启动的命令 默认 --net brighe 而这个就是我们的docker0</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-o</span> <span class="token parameter variable">--name</span> tomcat01 tomcat

<span class="token comment">#自定义网络</span>
<span class="token comment">#--driver bridge</span>
<span class="token comment">#--subnet 192.168.0.0/16</span>
<span class="token comment">#--gateway 192.168.0.1 mynet</span>
<span class="token comment">#</span>
<span class="token function">docker</span> network create <span class="token parameter variable">--driver</span> brighe <span class="token parameter variable">--subnet</span> <span class="token number">192.168</span>.0.0/16 <span class="token parameter variable">--gateway</span> <span class="token number">192.168</span>.0.1 mynet


<span class="token comment">#启动容器</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">--name</span> tamcat-net-01 <span class="token parameter variable">--net</span> mynet tomcat
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">--name</span> tamcat-net-02 <span class="token parameter variable">--net</span> mynet tomcat

<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> tomcat01 <span class="token function">ping</span> tomcat02 <span class="token comment">#不用--link也可以ping通</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>推荐我们平时自定义网络</p> <p>好处：</p> <p>redis-不同的集群使用不同的网络，保证集群式安全和健康的</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> network connect <span class="token parameter variable">--help</span>

<span class="token comment">#自定义网络连接docker0的tomcat01</span>
<span class="token function">docker</span> network connect mynet tomcat01 

<span class="token comment">#直接将tomcat01放到了mynet的网络下</span>
<span class="token comment">#一个容器两个地址</span>
<span class="token comment">#阿里云服务器 公有IP 私有IP</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>结论：假设要跨网络操作别人，就需要docker network connect 联通！</p> <h3 id="实战-部署redis集群"><a href="#实战-部署redis集群" class="header-anchor">#</a> 实战：部署Redis集群</h3> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515233802758-1639134747480.png" alt="image-20200515233802758"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515233610477-1639134755217.png" alt="image-20200515233610477"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515233958729-1639134797899.png" alt="image-20200515233958729"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200515234053268-1639134808918.png" alt="image-20200515234053268"><img src="D:%5CDesk%5CDocument%5C%E7%AC%94%E8%AE%B0%5CDocker%5Cdocker.assets%5Cimage-20200515234215291.png" alt="image-20200515234215291"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#创建网卡</span>
<span class="token function">docker</span> network create redis <span class="token parameter variable">--subnet</span> <span class="token number">172.38</span>.0.0/16

<span class="token comment">#通过脚本创建六个redis配置</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">port</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">1</span> <span class="token number">6</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token punctuation">\</span>
do<span class="token punctuation">\</span>





redis-cli <span class="token parameter variable">--cluster</span> create <span class="token number">172.38</span>.0.11:6379 <span class="token number">172.38</span>.0.12:6379 
<span class="token number">172.38</span>.0.13:6379 <span class="token number">172.38</span>.0.14:6379 <span class="token number">172.38</span>.0.15:6379 <span class="token number">172.38</span>.0.16:6379 --cluster-replicas <span class="token number">1</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>docker搭建redis集群完成</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>redis-cli <span class="token parameter variable">-c</span> <span class="token comment">#连接集群</span>
cluster info <span class="token comment">#打印信息</span>
<span class="token builtin class-name">set</span> a b
get a
cluster nodes 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="springboot微服务打包docker镜像"><a href="#springboot微服务打包docker镜像" class="header-anchor">#</a> SpringBoot微服务打包Docker镜像</h3> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200516000259099-1639134814063.png" alt="image-20200516000259099"></p> <p><img src="https://gitee.com/yong-forever/image_store/raw/master/utools/image-20200516000338133-1639134818113.png" alt="image-20200516000338133"></p> <h2 id="企业实战"><a href="#企业实战" class="header-anchor">#</a> 企业实战</h2> <h2 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> Docker Compose</h2> <h2 id="docker-swarm"><a href="#docker-swarm" class="header-anchor">#</a> Docker Swarm</h2> <h2 id="docker-stack"><a href="#docker-stack" class="header-anchor">#</a> Docker Stack</h2> <h2 id="docker-secret"><a href="#docker-secret" class="header-anchor">#</a> Docker Secret</h2> <h2 id="docker-config"><a href="#docker-config" class="header-anchor">#</a> Docker Config</h2> <h2 id="ci-cd-jenkins-流水线"><a href="#ci-cd-jenkins-流水线" class="header-anchor">#</a> CI/CD Jenkins 流水线</h2></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/yong-forever/yong-forever-blog/edit/master/docs/02.后端/40.学习笔记/05.《docker》笔记.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/yong-forever-blog/tags/?tag=%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" title="标签">#学习笔记</a><a href="/yong-forever-blog/tags/?tag=docker" title="标签">#docker</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/07/27, 22:17:49</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/yong-forever-blog/server/test/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">测试</div></a> <a href="/yong-forever-blog/server/javaweb/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">《JavaWeb》笔记</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/yong-forever-blog/server/test/" class="prev">测试</a></span> <span class="next"><a href="/yong-forever-blog/server/javaweb/">《JavaWeb》笔记</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/yong-forever-blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/yong-forever-blog/pages/c53048/"><div>Mysql面试题</div></a> <span>03-05</span></dt></dl><dl><dd>02</dd> <dt><a href="/yong-forever-blog/pages/3679e2/"><div>MyBatis面试题</div></a> <span>03-05</span></dt></dl><dl><dd>03</dd> <dt><a href="/yong-forever-blog/pages/3c0dc3/"><div>SpringBoot面试题</div></a> <span>03-05</span></dt></dl> <dl><dd></dd> <dt><a href="/yong-forever-blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:yong_forever@aliyun.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/yong-forever" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2024
    <span>Yiyong Zhan | <a href="https://gitee.com/yong-forever" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/yong-forever-blog/assets/js/app.61540ce8.js" defer></script><script src="/yong-forever-blog/assets/js/2.e7cba03d.js" defer></script><script src="/yong-forever-blog/assets/js/3.be5a514c.js" defer></script><script src="/yong-forever-blog/assets/js/35.6c7f488c.js" defer></script>
  </body>
</html>
